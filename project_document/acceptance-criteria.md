# Cloudflare 导航网站 - 验收标准文档

## 📋 文档说明

本文档详细定义了 Cloudflare 导航网站所有功能的验收标准，用于指导开发、测试和验收工作。

**验收标准类型**:
- **功能性验收标准**: 验证功能是否按预期工作
- **非功能性验收标准**: 验证性能、安全、可用性等指标
- **用户体验验收标准**: 验证界面、交互、反馈是否符合设计

---

## 1. 用户认证模块

### AC-001: 用户注册功能

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 有效注册 | 邮箱: test@example.com<br>密码: Test1234 | 注册成功，跳转到登录页 | 检查数据库中存在该用户记录 |
| 密码加密存储 | 密码: Test1234 | 数据库中密码为加密字符串 | 验证密码字段不等于明文密码 |
| 注册后自动跳转 | 注册成功 | 2 秒后跳转到登录页 | 检查 URL 变化 |

#### 异常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 邮箱格式无效 | 邮箱: invalid-email | 显示错误提示"请输入有效的邮箱地址" | 检查错误提示文本 |
| 密码过短 | 密码: 123 | 显示错误提示"密码至少需要 8 位字符" | 检查错误提示文本 |
| 密码缺少字母 | 密码: 12345678 | 显示错误提示"密码必须包含字母和数字" | 检查错误提示文本 |
| 密码缺少数字 | 密码: abcdefgh | 显示错误提示"密码必须包含字母和数字" | 检查错误提示文本 |
| 密码不一致 | 密码: Test1234<br>确认: Test5678 | 显示错误提示"两次输入的密码不一致" | 检查错误提示文本 |
| 邮箱已注册 | 邮箱: existing@example.com | 显示错误提示"该邮箱已被注册" | 检查数据库查重逻辑 |
| 重复提交 | 快速点击提交 2 次 | 仅创建 1 个账号 | 检查数据库记录数量 |

#### 性能要求
- 注册请求响应时间 < 500ms
- 密码加密耗时 < 200ms

#### 安全要求
- [ ] 密码使用 bcrypt 加密 (cost factor ≥ 10)
- [ ] 密码字段在响应中不返回
- [ ] 防止 SQL 注入攻击（使用参数化查询）
- [ ] 防止 XSS 攻击（邮箱输入转义）

---

### AC-002: 用户登录功能

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 正确登录 | 邮箱: test@example.com<br>密码: Test1234 | 登录成功，返回 JWT Token | 检查响应中包含 token 字段 |
| Token 生成 | 登录成功 | Token 包含用户 ID、邮箱、过期时间 | 解码 JWT Token 验证字段 |
| 登录后跳转 | 登录成功 | 跳转到管理仪表盘 | 检查 URL 变化为 /admin/dashboard |
| 记住我功能 | 勾选"记住我" | Token 有效期 30 天 | 验证 Token 的 exp 字段 |

#### 异常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 邮箱不存在 | 邮箱: notexist@example.com | 显示错误提示"邮箱或密码错误" | 检查错误提示文本 |
| 密码错误 | 邮箱: test@example.com<br>密码: WrongPass123 | 显示错误提示"邮箱或密码错误" | 检查错误提示文本 |
| 连续失败 5 次 | 连续 5 次错误密码 | 显示"账号已被锁定，请 15 分钟后重试" | 检查限流逻辑 |
| 账号锁定期间登录 | 账号锁定状态下登录 | 显示"账号已被锁定，请稍后重试" | 检查限流状态 |
| Token 过期 | 使用过期的 Token 访问 | 返回 401 Unauthorized | 检查响应状态码 |

#### 性能要求
- 登录请求响应时间 < 500ms
- Token 验证耗时 < 50ms

#### 安全要求
- [ ] Token 使用 HS256 算法签名
- [ ] Token 密钥存储在环境变量
- [ ] 登录失败 5 次后锁定 15 分钟
- [ ] Token 过期时间默认 24 小时
- [ ] Token 存储在 HttpOnly Cookie（可选）

---

### AC-003: 用户退出登录功能

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 退出登录 | 点击"退出登录"按钮 | Token 被清除，跳转到登录页 | 检查 LocalStorage/Cookie 为空 |
| 退出后访问受保护页面 | 访问 /admin/dashboard | 重定向到登录页 | 检查 URL 变化 |

#### 性能要求
- 退出登录响应时间 < 100ms

---

### AC-004: 登录状态持久化

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 关闭浏览器后重新打开 | 关闭并重新打开浏览器 | 登录状态保持，无需重新登录 | 检查 Token 仍然有效 |
| Token 过期自动跳转 | Token 过期后访问后台 | 跳转到登录页并提示"登录已过期" | 检查 URL 和提示信息 |

---

## 2. 链接管理模块

### AC-005: 添加链接功能

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 有效添加 | URL: https://example.com<br>标题: Example<br>描述: Test | 链接添加成功，显示成功提示 | 检查数据库中存在该链接 |
| 自动抓取触发 | 输入 URL 后失去焦点 | 显示加载状态，开始抓取 | 检查加载 Spinner 显示 |
| 自动抓取成功 | URL: https://github.com | 自动填充 title、favicon | 检查表单字段自动填充 |
| 手动修改抓取结果 | 修改自动填充的 title | 使用手动输入的值 | 检查最终保存的数据 |

#### 异常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| URL 格式无效 | URL: invalid-url | 显示错误提示"请输入有效的 URL" | 检查错误提示文本 |
| URL 已存在 | URL: https://existing.com | 显示警告提示"该链接已存在" | 检查去重逻辑 |
| 标题为空 | 标题为空 | 显示错误提示"标题不能为空" | 检查表单验证 |
| 网络中断时提交 | 网络断开后提交 | 显示错误提示"网络连接失败" | 检查错误处理 |
| 抓取超时 | 目标网站响应 > 10 秒 | 显示"抓取超时，请手动输入" | 检查超时处理 |
| 抓取失败 | 目标网站无法访问 | 显示"无法访问该网站" | 检查错误处理 |

#### 性能要求
- 添加链接请求响应时间 < 500ms
- 自动抓取超时时间 = 10 秒

#### 数据完整性
- [ ] 链接保存时记录 `created_at` 和 `updated_at`
- [ ] URL 字段唯一性约束
- [ ] 链接关联到分类（外键约束）

---

### AC-006: 编辑链接功能

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 编辑标题 | 修改标题为"新标题" | 保存成功，显示新标题 | 检查数据库中标题已更新 |
| 编辑 URL | 修改 URL | 重新触发自动抓取 | 检查抓取逻辑 |
| 取消编辑 | 点击"取消"按钮 | 恢复原始数据，关闭表单 | 检查表单数据 |

#### 异常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 编辑不存在的链接 | 链接 ID 不存在 | 返回 404 错误 | 检查响应状态码 |
| 编辑时网络中断 | 网络断开后提交 | 显示错误提示 | 检查错误处理 |

#### 数据完整性
- [ ] 编辑操作更新 `updated_at` 字段
- [ ] 编辑操作不修改 `created_at` 字段

---

### AC-007: 删除链接功能

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 删除链接 | 点击"删除"并确认 | 链接从列表中移除 | 检查数据库中记录已删除 |
| 取消删除 | 点击"删除"然后取消 | 链接保留 | 检查数据库中记录未删除 |

#### 异常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 删除不存在的链接 | 链接 ID 不存在 | 返回 404 错误 | 检查响应状态码 |
| 删除时网络中断 | 网络断开后确认删除 | 显示错误提示 | 检查错误处理 |

#### 用户体验
- [ ] 删除前必须二次确认
- [ ] 确认对话框显示链接标题
- [ ] 删除成功后显示成功提示

---

### AC-008: 批量删除链接功能

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 批量删除 | 勾选 5 个链接，点击"批量删除" | 5 个链接全部删除 | 检查数据库中记录已删除 |
| 部分失败 | 批量删除时部分链接不存在 | 显示"成功删除 X 个，失败 Y 个" | 检查错误提示 |

#### 异常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 批量删除数量过多 | 勾选 101 个链接 | 显示错误提示"单次最多删除 100 个" | 检查数量限制 |

#### 性能要求
- 批量删除请求响应时间 < 2 秒（100 个链接）

#### 数据完整性
- [ ] 批量删除在事务中执行（保证原子性）

---

### AC-009: 链接排序功能

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 拖拽排序 | 拖拽链接 A 到位置 3 | 链接 A 显示在第 3 位 | 检查数据库中 order 字段 |
| 手动输入排序 | 输入排序数字 5 | 链接显示在第 5 位 | 检查数据库中 order 字段 |

#### 用户体验
- [ ] 拖拽时显示拖拽指示器
- [ ] 拖拽结束后立即保存排序

---

### AC-010: 自动抓取网站信息

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 抓取 title | URL: https://github.com | 返回 "GitHub: Let's build from here" | 检查返回的 title 字段 |
| 抓取 favicon | URL: https://github.com | 返回 favicon URL | 检查返回的 favicon 字段 |
| 抓取 logo | URL: https://github.com | 返回 Open Graph 图片 | 检查返回的 logo 字段 |

#### 异常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 目标网站无法访问 | URL: https://invalid-domain-xyz.com | 返回"无法访问该网站" | 检查错误信息 |
| 目标网站无 favicon | URL: https://example-no-icon.com | 使用默认图标 | 检查返回的 favicon 为默认值 |
| 目标网站无 title | URL: https://example-no-title.com | 使用 URL 作为 title | 检查返回的 title 字段 |
| CORS 限制 | 目标网站禁止跨域 | 服务端抓取，避免 CORS | 检查抓取在 Workers 中执行 |

#### 性能要求
- 抓取请求响应时间 < 3 秒
- 抓取超时时间 = 10 秒

#### 缓存策略
- [ ] 抓取结果缓存 24 小时（使用 Workers KV）
- [ ] 相同 URL 在 24 小时内不重复抓取

---

## 3. 分类管理模块

### AC-011: 创建分类功能

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 有效创建 | 名称: 开发工具<br>图标: code<br>颜色: blue | 分类创建成功 | 检查数据库中存在该分类 |
| 仅名称创建 | 名称: 学习资源 | 分类创建成功（使用默认图标和颜色） | 检查数据库中存在该分类 |

#### 异常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 分类名称为空 | 名称为空 | 显示错误提示"分类名称不能为空" | 检查表单验证 |
| 分类名称重复 | 名称: 已存在的分类 | 显示错误提示"该分类名称已存在" | 检查去重逻辑 |
| 分类数量超限 | 已有 20 个分类 | 显示错误提示"分类数量已达上限" | 检查数量限制 |

#### 数据完整性
- [ ] 分类名称唯一性约束
- [ ] 分类创建时记录 `created_at` 和 `updated_at`

---

### AC-012: 编辑分类功能

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 编辑名称 | 修改名称为"新名称" | 保存成功，显示新名称 | 检查数据库中名称已更新 |
| 编辑图标和颜色 | 修改图标和颜色 | 保存成功，显示新样式 | 检查数据库中样式已更新 |

#### 异常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 编辑为重复名称 | 修改名称为已存在的名称 | 显示错误提示 | 检查去重逻辑 |

#### 数据完整性
- [ ] 编辑操作更新 `updated_at` 字段
- [ ] 编辑分类后，所有关联的链接自动更新

---

### AC-013: 删除分类功能

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 删除空分类 | 删除无链接的分类 | 分类删除成功 | 检查数据库中记录已删除 |
| 删除含链接的分类（仅删除分类） | 选择"仅删除分类" | 分类删除，链接移至"未分类" | 检查链接的 category_id 更新为"未分类" |
| 删除含链接的分类（同时删除链接） | 选择"删除分类及所有链接" | 分类和所有链接删除 | 检查数据库中记录已删除 |

#### 异常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 删除默认分类 | 尝试删除"默认分类" | 显示错误提示"无法删除默认分类" | 检查删除逻辑 |
| 删除不存在的分类 | 分类 ID 不存在 | 返回 404 错误 | 检查响应状态码 |

#### 数据完整性
- [ ] 删除操作在事务中执行（保证原子性）
- [ ] 删除分类时同时删除或更新关联的链接

---

### AC-014: 分类排序功能

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 拖拽排序 | 拖拽分类 A 到位置 2 | 分类 A 显示在第 2 位 | 检查数据库中 order 字段 |

#### 用户体验
- [ ] 拖拽时显示拖拽指示器
- [ ] 拖拽结束后立即保存排序
- [ ] 前端显示时按 order 字段升序排列

---

### AC-015: 为链接指定分类

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 选择分类 | 选择分类"开发工具" | 链接保存到该分类 | 检查数据库中 category_id 字段 |
| 未选择分类 | 不选择分类 | 链接保存到"默认分类" | 检查数据库中 category_id 为默认值 |

#### 数据完整性
- [ ] 链接与分类通过外键关联
- [ ] 每个链接只能属于一个分类

---

## 4. 前端展示页面

### AC-016: 响应式首页展示

#### 桌面端（宽度 > 1024px）
| 测试场景 | 预期输出 | 验证方式 |
|---------|---------|---------|
| 布局展示 | 显示多列网格布局（3-4 列） | 检查 CSS Grid 列数 |
| 分类导航 | 分类导航栏显示在顶部或左侧 | 检查导航栏位置 |

#### 平板端（768px - 1024px）
| 测试场景 | 预期输出 | 验证方式 |
|---------|---------|---------|
| 布局展示 | 显示两列网格布局 | 检查 CSS Grid 列数 |

#### 移动端（宽度 < 768px）
| 测试场景 | 预期输出 | 验证方式 |
|---------|---------|---------|
| 布局展示 | 显示单列列表布局 | 检查 CSS Grid 列数 |
| 分类导航 | 分类导航支持横向滚动 | 检查滚动行为 |

#### 性能要求
- [ ] 首次内容绘制 (FCP) < 1.5 秒
- [ ] 最大内容绘制 (LCP) < 2 秒
- [ ] 累计布局偏移 (CLS) < 0.1
- [ ] Lighthouse 性能分数 > 90

#### 浏览器兼容性
- [ ] Chrome 最新版本正常显示
- [ ] Firefox 最新版本正常显示
- [ ] Safari 最新版本正常显示
- [ ] Edge 最新版本正常显示

---

### AC-017: 分类导航

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 显示所有分类 | 页面加载 | 显示所有分类标签（含链接数量） | 检查分类列表 |
| 点击分类 | 点击"开发工具"分类 | 仅显示该分类下的链接 | 检查链接列表 |
| 点击"全部" | 点击"全部"分类 | 显示所有链接 | 检查链接列表 |
| 空分类显示 | 点击无链接的分类 | 显示"该分类暂无链接" | 检查空状态提示 |

#### 用户体验
- [ ] 分类切换无页面刷新
- [ ] 当前分类高亮显示
- [ ] 分类显示链接数量

---

### AC-018: 链接卡片展示

#### 正常场景
| 测试场景 | 预期输出 | 验证方式 |
|---------|---------|---------|
| 卡片显示 | 显示 logo、标题、描述 | 检查卡片元素 |
| 悬停效果 | 鼠标悬停时卡片放大/显示阴影 | 检查 CSS 效果 |
| 点击跳转 | 点击卡片打开新标签页 | 检查 `target="_blank"` 属性 |
| 图片懒加载 | 图片在可视区域时才加载 | 检查 `loading="lazy"` 属性 |

#### 异常场景
| 测试场景 | 预期输出 | 验证方式 |
|---------|---------|---------|
| 图片加载失败 | 显示占位符图标 | 检查 `onerror` 处理 |
| 描述过长 | 描述超过 3 行时截断并显示"..." | 检查 CSS `line-clamp` |

---

### AC-019: 搜索功能

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 搜索标题 | 输入"GitHub" | 显示标题包含"GitHub"的链接 | 检查过滤逻辑 |
| 搜索描述 | 输入"代码托管" | 显示描述包含"代码托管"的链接 | 检查过滤逻辑 |
| 清空搜索 | 清空搜索框 | 显示所有链接 | 检查链接列表 |
| 无结果 | 输入"不存在的关键词" | 显示"未找到相关链接" | 检查空状态提示 |

#### 用户体验
- [ ] 搜索实时过滤（输入时立即显示结果）
- [ ] 搜索不区分大小写
- [ ] 搜索支持模糊匹配

---

### AC-020: 深色模式（可选）

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 切换深色模式 | 点击深色模式按钮 | 切换到深色主题 | 检查 body 的 class 或 data 属性 |
| 保持主题选择 | 刷新页面 | 保持上次选择的主题 | 检查 LocalStorage |
| 系统偏好自动切换 | 系统设置为深色模式 | 自动启用深色模式 | 检查 `prefers-color-scheme` |

#### 用户体验
- [ ] 深色模式下背景、文字、卡片颜色适配
- [ ] 深色模式切换动画流畅

---

## 5. 后台管理界面

### AC-021: 管理员登录页面

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 访问后台 | 访问 /admin | 显示登录页面 | 检查页面内容 |
| 已登录访问后台 | 已登录状态访问 /admin | 跳转到仪表盘 | 检查 URL 变化 |
| 未登录访问子页面 | 未登录访问 /admin/links | 重定向到登录页 | 检查 URL 变化 |

---

### AC-022: 管理仪表盘

#### 正常场景
| 测试场景 | 预期输出 | 验证方式 |
|---------|---------|---------|
| 显示统计信息 | 显示链接总数、分类总数 | 检查统计卡片 |
| 显示最近链接 | 显示最近添加的 5 个链接 | 检查链接列表 |

#### 性能要求
- [ ] 仪表盘加载时间 < 1 秒

---

### AC-023: 链接管理页面

#### 正常场景
| 测试场景 | 预期输出 | 验证方式 |
|---------|---------|---------|
| 显示链接列表 | 显示所有链接（表格或卡片） | 检查列表内容 |
| 搜索链接 | 输入关键词过滤链接 | 检查过滤逻辑 |
| 排序链接 | 点击列标题排序 | 检查排序逻辑 |
| 分页显示 | 链接数量 > 20 时显示分页 | 检查分页控件 |

#### 用户体验
- [ ] 支持表格视图和卡片视图切换
- [ ] 表格支持按标题、分类、创建时间排序

---

### AC-024: 分类管理页面

#### 正常场景
| 测试场景 | 预期输出 | 验证方式 |
|---------|---------|---------|
| 显示分类列表 | 显示所有分类（含链接数量） | 检查列表内容 |
| 拖拽排序 | 支持拖拽调整分类顺序 | 检查拖拽逻辑 |

---

### AC-025: 用户设置页面

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 修改邮箱 | 输入新邮箱 | 保存成功 | 检查数据库中邮箱已更新 |
| 修改密码 | 输入旧密码、新密码、确认密码 | 保存成功，退出登录 | 检查退出登录行为 |

#### 异常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 旧密码错误 | 输入错误的旧密码 | 显示错误提示"旧密码错误" | 检查错误提示 |
| 新密码过弱 | 新密码: 123 | 显示错误提示"密码过弱" | 检查密码验证 |

---

## 6. 部署与运维

### AC-026: 一键部署脚本

#### 正常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| 执行部署 | 运行 `npm run deploy` | 部署成功，输出网站 URL | 检查命令行输出 |
| 检测 API Token | Token 存在 | 自动使用 Token 部署 | 检查环境变量 |
| 部署进度显示 | 部署过程中 | 显示进度条或日志 | 检查命令行输出 |

#### 异常场景
| 测试场景 | 输入 | 预期输出 | 验证方式 |
|---------|------|---------|---------|
| Token 无效 | 使用无效的 Token | 显示错误提示"API Token 无效" | 检查错误信息 |
| 网络连接失败 | 网络断开 | 显示错误提示"网络连接失败" | 检查错误处理 |
| 项目名称冲突 | 项目名称已存在 | 显示错误提示"项目名称已存在" | 检查错误处理 |

#### 性能要求
- [ ] 部署时间 < 5 分钟

---

### AC-027: 数据库初始化脚本

#### 正常场景
| 测试场景 | 预期输出 | 验证方式 |
|---------|---------|---------|
| 创建表结构 | 自动创建 users、links、categories 表 | 检查数据库中表存在 |
| 表已存在 | 跳过创建，显示提示 | 检查命令行输出 |

#### 数据完整性
- [ ] users 表包含 id, email, password, created_at, updated_at
- [ ] links 表包含 id, url, title, description, category_id, order, created_at, updated_at
- [ ] categories 表包含 id, name, icon, color, order, created_at, updated_at

---

### AC-028: 部署文档

#### 文档完整性
- [ ] README.md 包含前置要求
- [ ] README.md 包含环境变量配置
- [ ] README.md 包含部署步骤
- [ ] README.md 包含常见问题 (FAQ)
- [ ] README.md 包含故障排查指南
- [ ] 文档包含截图或 GIF 演示

---

## 7. 非功能性验收标准

### 性能验收标准

| 指标 | 目标值 | 验证方式 |
|-----|-------|---------|
| 首页加载时间 (LCP) | < 2 秒 | Lighthouse 测试 |
| API 响应时间 (P95) | < 500ms | 性能监控工具 |
| 首次内容绘制 (FCP) | < 1.5 秒 | Lighthouse 测试 |
| 累计布局偏移 (CLS) | < 0.1 | Lighthouse 测试 |
| Time to Interactive (TTI) | < 3 秒 | Lighthouse 测试 |

---

### 安全验收标准

| 检查项 | 验证方式 |
|-------|---------|
| HTTPS 强制加载 | 检查 HTTP 自动重定向到 HTTPS |
| 密码加密存储 | 检查数据库中密码为 bcrypt 加密字符串 |
| JWT Token 安全 | 检查 Token 使用 HS256 签名，包含过期时间 |
| SQL 注入防护 | 检查所有查询使用参数化查询 |
| XSS 防护 | 检查用户输入经过 HTML 转义 |
| CSRF 防护 | 检查表单提交包含 CSRF Token（可选） |
| 限流保护 | 检查登录接口限流（5 次/分钟） |

---

### 可用性验收标准

| 指标 | 目标值 | 验证方式 |
|-----|-------|---------|
| 系统可用性 | > 99.9% | 依赖 Cloudflare SLA |
| 数据备份 | 自动备份 | 检查 D1 备份策略 |
| 错误监控 | 记录关键错误 | 检查 Workers Logs |
| 健康检查 | 提供 /api/health 接口 | 访问接口验证 |

---

### 可维护性验收标准

| 检查项 | 验证方式 |
|-------|---------|
| 代码规范 | 所有代码通过 ESLint 检查 |
| TypeScript 类型 | 无 `any` 类型，编译无警告 |
| 单元测试覆盖率 | > 70% | 运行测试覆盖率工具 |
| API 文档 | 提供 Swagger UI 文档 | 访问文档页面 |
| 部署文档 | 提供详细的 README.md | 检查文档完整性 |

---

### 可访问性验收标准 (WCAG 2.1 AA)

| 检查项 | 验证方式 |
|-------|---------|
| 语义化 HTML | 使用 `<nav>`, `<main>`, `<article>` 等标签 |
| 图片 alt 属性 | 所有图片包含 alt 属性 |
| 表单 label | 所有表单元素包含 `<label>` |
| 键盘导航 | 支持 Tab 导航、Enter 确认 |
| ARIA 属性 | 适当使用 ARIA 属性增强可访问性 |
| 颜色对比度 | 文字与背景对比度 > 4.5:1 |

---

## 📝 文档版本

| 版本 | 日期 | 作者 | 变更说明 |
|-----|------|------|---------|
| 1.0 | 2026-01-20 | Claude (需求分析专家) | 初始版本 |

---

**文档状态**: ✅ 已完成
**下一步行动**: 创建技术约束文档 (technical-constraints.md)
